<도입부> 
안녕하세요, 4조 2부 발표를 맡은 조 민근입니다. 만나서 반갑습니다.
지금부터 4조의 시행착오가 담긴 모델링을 말씀드릴 텐데요. 가장 흥미로운 부분이니 집중해서 들어주시면 감사드리겠습니다.
===============================================================
<첫번째 모델>
저희는 총 3개의 SCFI 예측모델을 만들었는데요. 그 중 다변량 멀티스텝 LSTM 모델을 우선 소개드리겠습니다.
LSTM모델은 1. 과거 데이터 중 중요한 부분만 저장하여 장기 의존성 학습이 가능하고,
2. 미래 값과의 연관성을 파악하여 지수 예측에 효과적이며,
3. 선택적 학습을 통해 데이터 품질이 낮아도 좋은 성능을 보여주는 특징을 갖고 있는데요.
친숙한 LSTM모델을 사용해서 4조의 첫 모델링을 시작하였습니다.
==================================
<데이터 설명>
보시는 그래프는 SCFI의 시계열성을 모델링 전 확인차 시각적으로 나타낸 모습입니다.
빨간색으로 강조한 계절성에서 특정 주기로 반복되는 모습을 확인하고 예측모델을 만들기에 SCFI가 적합한 것을 확인했습니다.
=============================
<변수 선정 및 상관관계>
다음으로 변수 선정을 위해 뉴스기사와 논문 등을 조사해본 결과, 환율과 유가 등의 변수들이 SCFI와 큰 연관이 있음을 알게 되었습니다.
따라서 직접 해당 변수들 간의 상관관계를 파악해보고, 회귀모델의 피처 중요도 또한 확인한 결과 SCFI와 환율, 유가, 유가제품들은 유의미한 상관관계를 갖는것을 확인했습니다.
==================================
<데이터 설명2>
사용한 데이터는 총 6가지로 데이터의 모습은 다음과 같습니다.
SCFI와 상관관계가 높게 나타난 총 5가지 데이터인 코로나 확진자 수, 환율, 총 3가지의 유가를 변수로 사용했습니다.
다소 생뚱맞아 보이는 코로나 확진자 수 데이터는 이상치라고 볼 수 있는 코로나 기간의 급증한 OF값을 설명해주는 변수로 사용한 것임을 말씀드립니다.
===================================
 <PCA 진행>
분산팽창지수와 공분산지수를 확인한 결과, 다중공선성이 높은 변수들을 제거하기보다는 손실률이 5% 이내인 2개의 변수로 PCA를 진행했습니다.
==================================
<PCA 진행2>
PCA 변환 후// 변수의 그래프와 값은 보시는 화면과 같습니다.
==================================
<LSTM모델 학습 결과>
LSTM모델 학습 결과는 다음과 같은 LOSS와 PREDICT 값을 가지며 RMSE, R2SCORE 몇으로 준수한 결과를 보입니다.
하지만 멀티스텝 모델의 특성상 예측 기간이 늘어날수록 정확도를 보장할 수 없었기 때문에, 단변량 싱글스텝 모델 구축의 필요성을 느꼈습니다.
===================================
<단변량 싱글스텝 모델>
두번째 시도로는 LSTM 모델에 비해 수식이 간단하고, 적은 데이터에 적합한 GRU 앙상블 모델을 사용하여 단변량 싱글스텝 모델링을 시작했습니다.
=================================
<데이터 설명>
사용한 데이터는 SCFI 주차별 데이터 하나입니다만 원본 값과 4주간 이동평균 값 두 가지로 데이터를 달리해 모델 학습을 진행했습니다.
=================================
<모델 예측 결과1>
예측 결과, 원본데이터를 학습한 GRU모델은 RMSE는 몇, R2SCORE 은 몇이고, 4주간 이동평균값을 학습한 GRU모델은 RMSE 몇 R2SCORE 몇으로 로 상당히 좋은 결과를 보여줍니다.
=================================
<모델 예측 결과2>
총 3개의 SCFI 예측모델의 결과 그래프입니다.
빨간색 선 이전 데이터는 TRAIN, 녹색선까지는 TEST, 녹색선 이후는 미래 8주차 예측값입니다. 
최종 모델은 3개 모델의 가중평균 값을 최종 예측값으로 사용했습니다.
=======================================
<최종 모델 예측 결과 3>
3개 모델의 가중평균 값을 예측값으로 사용한 최종 모델의 결과입니다.
빨간색 점이 6월 1주차 실제값이며 주황색 선이 3가지 모델의 가중평균값이 되겠습니다.
6월 1주차 값과 가까워지도록 임의의 값을 가중치로 주어 블렌딩하였고,,
맨 아래 LSTM 다변량 모델은 다양한 변수를 사용하여 SCFI 예측에 타당성을, 이동평균을 사용한 GRU 모델은 예측값의 추세를, 가장 위에 있는 파란 점선인 원본데이터를 사용한 GRU모델은 최종모델에 정확도를 부여해준다고 생각해주시면 되겠습니다. 
2차 프로젝트 전까지 VOTING REGRESSSOR 등을 통해 더 좋은 가중치를 찾을 수 있을 것으로 보입니다.
여기까지 SCFI 모델 소개를 마치고 다음으로 OF 예측모델 소개로 넘어가겠습니다.
========================================
<OF-SCFI>
OF 예측을 위해 SCFI모델을 왜 만들었는지 궁금하시죠?
1. OF는 기업들의 경쟁력인 금액 부분이라 데이터를 수집하기 어려웠습니다.
따라서, 부족한 데이터를 가지고 좋은 예측결과를 도출하기 위해 기사와 논문등 여러 자료들을 조사해 본 결과 
, SCFI는 OF 금액을 근거로 추출한 지수라는 점을 확인했고, 흐름이 매우 유사할 것이라는 가정을 세웠습니다.
SCFI와 OF 데이터를 스케일링 하여 그래프로 나타내보니 유사성을 확인할 수 있었고, 이를 바탕으로 피어슨 상관계수를 확인해보니 모델을 학습시키기 적합한 수치가 나왔습니다.
이러한 연유로 SCFI모델을 먼저 만들고 OF 예측 모델을 만들게 되었습니다.
===============================================
<OF 예측 모델>
지금부터 OF 예측을 위한 모델을 소개하겠습니다.
앞서 말씀드린대로, 그래프를 보시면 OF와 SCFI값의 유사성은 있으나 차이가 있는 모습입니다.
좌측은 각 항로별 OF 금액의 월 평균값을 나타낸 그래프인데요.
항로별로 편차와 모습이 다른 것을 확인하고, 예측정확도를 높이고자 각 항로별로 모델을 만들기로 했습니다.
=======================================
<데이터 설명>
OF 예측을 위해 사용한 데이터는 다음과 같습니다.
선적지와 양하지는 추후 2차 프로젝트에서 사이트를 구축할 때 입력값으로 사용하여 조회하는 프로그램을 만들 예정이기 때문에 변수로 사용하였습니다. 
선적지와 양하지는 라벨 인코딩하였고 값은 다음과 같습니다.
=========================================
<OF 모델링 과정>
모든 항로의 모델을 만들기는 현실적으로 불가능하기에, 수출 상위 5개 국가인 한일, 한중, 동남아, 북미, 유럽 항로를 뽑아 모델링을 진행하였습니다.
해양수산부의 일별 운임데이터와 매칭이 되는 SCFI 주차별 예측값을 조인해 사용하였고, 항로별 OF금액과 변수들의 피어슨 상관계수는 다음과 같습니다.
말씀드린대로 선적지와 양하지는 입력값으로 사용될 것이라 상관계수가 낮은 모습을 보여도 변수로 사용하였습니다.
==========================================
<OF 모델링 결과>
항로별 OF 모델링 결과입니다.
각 항로별로 최고의 성능을 보여주도록 모델링하였으며, 선적지와 양하지의 라벨 인코딩 값이 많았기 때문에 TREE 기반 앙상블 모델 위주로 사용하거나, 2가지 모델을 VOTING 하는 방법도 사용하였습니다.
R2 SCORE 결과를 보시면 0.7 이상의 준수한 값을 보여주는 모델도 있었지만, 일본항로 모델의 경우는 예상보다 낮은 결정계수를 보여주었습니다. 앞서 일본의 OF금액과 SCFI 피어슨 상관계수가 유독 낮았던 것 보셨을까요? 그점과 일맥상통하는데요. 이 점에 대해선 뒤에서 더 말씀드리도록 하겠습니다.
=========================================================
<OF 모델링 실제 VS 결과>
OF 예측모델의 정확도를 보여드리기 위해 실제 견적값과 최종 예측모델의 값을 가져와 봤습니다.
위에서부터 중국 //일본 //  동남아 항로입니다.  좌측이 실제값 우측이 예측값입니다.
다음은 북미와 유럽항로입니다.
===============================================================
<결과 분석>
앞서 보신 모델별 R2SCORE에서 알 수 있듯이, 아직 개선의 여지가 많습니다.
우선 같은 항로, 같은 선사, 같은 운송조건일지라도 현실에서는 견적이 매우 다양해서 모델이 학습한 데이터 또한 편차가 큰 값을 가지고 있었습니다.
또, 운송 시간이 OF에 영향을 미치는데, 이 모델은 해당 부분을 고려하지 않아 예측의 정확도가 낮아졌습니다.
뿐만아니라 일본, 중국, 동남아 항로는 기업 간 담합이 장기간 이어지는 등 외적 요소가 작용하여 정확한 값을 예측하는 데 어려움이 있었습니다.
===============================================================
<결과분석2-기업>
또한 씨에어허브측의 요구사항은 내륙운송비용이나 LCL 화물의 견적도 예측하는 것이었습니다만 확보한 데이터로는 수출업자의 의무가 선적에서 종료되는 F 조건의 경우에만 예측할 수 있었습니다.

아직은 미완성인 모델이기 때문에 추후 씨에어허브사에서 취합중인 데이터와 변수들을 추가로 사용하여 학습을 진행한다면, 모델의 정확도는 충분히 올라갈 여지가 있다고 생각합니다.
====================================
<해상운임 예측모델의 잠재성>
마지막으로 해상운임 예측모델이 가진 가능성에 대해 말씀드리겠습니다.
우선 선사에서 제공하는 정보를 받아 실제 견적을 의뢰하는 것이 아닌 조회해보는 것이기 때문에 부담이 적습니다. 
타사이트는 개인정보나 사업자 번호를 남겨서 실제 견적의뢰를 넣도록 되어있다는 점과 비교해보면 간단하고 편리합니다.
둘째, 예측모델을 사용하면 선사에서 제공하는 일이주 까지의 가격 뿐만 아니라, 최장 8주까지 알아볼 수 있기 때문에 운임변동이 급속한 요즘같은 세태에 활용도가 높은 모델이라고 할 수 있습니다. 코로나, 전쟁 등으로 인해 국제 정세가 급변하는 현시점이 저희의 예측모델이 필요한 지점이라고 생각합니다.
셋째, 지난 모든 데이터들을 사용한 예측값이기 때문에 실제 스케줄된 항로가 아니여도 조회가 가능해서 많은 양하지별 견적을 확인해 볼 수 있습니다.
이 모델을 통해, 포워딩사, 더 나아가 수출입기업까지 미래 해상 운임 추세에 대한 인사이트를 얻을 수 있는 프로그램을 만드는 것이 목표인데요.
2차 프로젝트에는 또 어떤 모습으로 발전해 있을지 기대해주시기바라며 발표를 이만 마무리하도록 하겠습니다.
긴시간 경청해 주신 모든 분들께 감사드리며 이어 질의응답 시간을 갖도록 하겠습니다. 
조원 모두가 단상으로 올라와서 답변드리겠습니다.